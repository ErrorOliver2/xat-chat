<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ixchats - Chat Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #2c3e50;
            color: white;
            overflow: hidden;
            height: 100vh;
            font-size: 0.93333rem;
        }

        /* Main Container */
        .background {
            width: 100%;
            height: 100%;
            background-size: 100% 100%;
            display: table;
        }

        .row {
            display: table-row;
        }

        .cell {
            display: table-cell;
            vertical-align: top;
        }

        /* Main Chat Area (74%) */
        .main-chat-area {
            width: 74%;
        }

        .chat-container {
            width: 100%;
            height: 100%;
            display: table;
        }

        .chat-messages-area {
            width: 100%;
            height: 75%;
        }

        .chat-messages-container {
            padding: 0.6rem 0.26667rem 0.13333rem 0.73333rem;
        }

        .tabcontent {
            position: relative;
            z-index: 2;
            height: 92%;
            border: 1px solid rgba(192, 192, 192, 0.8);
            border-bottom: none;
            border-radius: 4px 4px 0 0;
            background-color: rgba(255, 255, 255, 0.4);
        }

        .tab {
            overflow-y: hidden;
            height: 8%;
            position: relative;
            z-index: 1;
        }

        .tab button {
            background-color: rgba(255, 255, 255, 0.4);
            border: none;
            outline: 0;
            cursor: pointer;
            padding-left: 0.2rem;
            font-size: 0.85rem;
            border-top: 1px solid rgba(192, 192, 192, 0.8);
            border-radius: 0 0 4px 4px;
            height: 88%;
            line-height: 88%;
            font-weight: 700;
            color: #000;
        }

        .tab button.active {
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-top: 2px solid rgba(255, 255, 255, 0);
        }

        .tab button:active {
            color: inherit;
        }

        /* Messages Container */
        #messagesContainer {
            height: 100%;
            width: 100%;
            padding-top: 12px;
            position: relative;
            overflow-x: hidden;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            top: 0 !important;
            transform: translateZ(0);
        }

        #messages {
            margin-bottom: 0.25rem;
            display: flex;
            flex-wrap: nowrap;
            flex-direction: column;
        }

        .message {
            background-color: transparent;
            margin-top: 0;
            margin-bottom: 0;
            padding: 0.1888rem;
            padding-left: 0.13333rem;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }

        .message.system {
            color: #f39c12;
            font-style: italic;
        }

        .message.user {
            color: #ecf0f1;
        }

        .message .username {
            font-weight: bold;
            color: #3498db;
        }

        .message .content {
            margin-left: 5px;
        }

        /* Smiley Bar */
        .smiley-bar {
            width: 100%;
            height: 7%;
        }

        .smiley-bar-container {
            padding: 0.3rem 0 0.1rem 0.5rem;
        }

        .smileyBar {
            width: 100%;
            height: 100%;
            margin-top: 4px;
            position: relative;
            display: table;
        }

        #smileyBar {
            display: flex;
            gap: 5px;
            align-items: center;
            flex-wrap: wrap;
        }

        .smiley {
            width: 20px;
            height: 20px;
            cursor: pointer;
            border-radius: 2px;
            transition: transform 0.2s;
            font-size: 16px;
        }

        .smiley:hover {
            transform: scale(1.2);
        }

        /* Input Area */
        .input-area {
            width: 100%;
            height: 18%;
        }

        .input-container {
            padding: 0.4rem 0.3rem 0.7rem 0.7rem;
        }

        .input-wrapper {
            width: 100%;
            height: 100%;
            display: table;
        }

        .text-entry-row {
            display: table-row;
        }

        .text-entry-cell {
            display: table-cell;
            width: 92.6%;
            height: 100%;
            position: inherit;
        }

        .textentry {
            width: 100%;
            height: 100%;
            text-align: left;
            overflow-y: auto;
            font-weight: 700;
            position: relative;
            overflow-x: hidden;
            word-break: break-word;
            -webkit-user-select: text;
            transition: 0.25s ease-out all;
            outline: 0 solid transparent;
            display: block;
            border: 1px solid rgba(192, 192, 192, 0.8);
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.4);
            padding: 0 0 0 0.3rem;
        }

        .send-button-cell {
            display: table-cell;
            position: relative;
            z-index: 1;
            width: 8%;
            height: 100%;
            padding-left: 0.73rem;
        }

        .butcontainer {
            width: 100%;
            height: 100%;
        }

        .butlayout {
            width: 100%;
            height: 100%;
        }

        .butcontent {
            width: 100%;
            height: 100%;
            background: #3498db;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .butcontent:hover {
            background: #2980b9;
        }

        /* Right Sidebar (26%) */
        .right-sidebar {
            position: relative;
            z-index: 2;
            width: 26%;
        }

        .sidebar-container {
            width: 100%;
            height: 100%;
            display: table;
        }

        .sidebar-main {
            width: 73%;
            height: 100%;
        }

        .sidebar-main-container {
            width: 100%;
            height: 100%;
            display: table;
        }

        .visitors-area {
            width: 100%;
            height: 75%;
        }

        .visitors-container {
            padding: 0.6rem 0.76667rem 0 0.46667rem;
        }

        #visitorsContainer {
            height: 100%;
            width: 100%;
            position: relative;
            overflow-x: hidden;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            transform: translateZ(0);
        }

        #idvisitors {
            list-style: none;
        }

        .friend {
            background-color: transparent;
            overflow: visible;
            position: relative;
            padding: 0;
            margin-top: 0;
            margin-bottom: 0;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            cursor: pointer;
            padding: 5px 8px;
            margin: 2px 0;
            border-radius: 4px;
            transition: background 0.3s;
            font-size: 12px;
        }

        .friend:hover {
            background: rgba(52, 152, 219, 0.3);
        }

        .friend::before {
            content: "‚óè";
            color: #27ae60;
            margin-right: 5px;
        }

        .section {
            background-image: linear-gradient(hsla(0, 0%, 100%, 0.1), rgba(0, 0, 0, 0.05));
            border-radius: 4px;
            margin: 0.26667rem 0.23333rem;
            cursor: pointer;
            padding: 8px;
            font-weight: bold;
            color: #bdc3c7;
        }

        .section:hover {
            background: linear-gradient(rgb(255 255 255 / 12%), rgb(255 255 255 / 12%));
        }

        /* List Tabs */
        .list-tabs {
            width: 100%;
            height: 7%;
            overflow-y: hidden;
        }

        .list-tabs-container {
            padding: 0 0.8rem 0 0.1rem;
        }

        .list-tabs-wrapper {
            width: 100%;
            height: 100%;
            display: table;
        }

        .listlinks {
            width: 50%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.4);
            border: none;
            outline: 0;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 700;
            color: #000;
            border-top: 1px solid rgba(192, 192, 192, 0.8);
            border-radius: 0 0 4px 4px;
        }

        .listlinks.active {
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-top: 2px solid rgba(255, 255, 255, 0);
        }

        /* Right Bar Icons */
        .right-bar-icons {
            width: 100%;
            height: 7%;
        }

        .right-bar-container {
            padding: 0 0.8rem 0 0.1rem;
        }

        .right-bar-wrapper {
            width: 100%;
            height: 100%;
            display: table;
        }

        .svgBack {
            background-size: 20px;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .svgBack:hover {
            opacity: 0.7;
        }

        #groupBut {
            width: 23%;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.54 8H17c-.8 0-1.54.37-2.01 1l-1.99 2.5V18h-2v-8.5l-1.99-2.5A2.5 2.5 0 0 0 7 8H5.46c-.8 0-1.54.37-2.01 1L.96 16.63A1.5 1.5 0 0 0 2.5 18H5v6h2v-6h7v6h2z"/></svg>');
        }

        #helpBut {
            width: 27%;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg>');
        }

        #xatBut {
            width: 49%;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
        }

        /* Action Buttons */
        .action-buttons {
            width: 100%;
            height: 18%;
        }

        .action-buttons-container {
            width: 100%;
            height: 100%;
            display: table;
        }

        .action-button-row {
            width: 100%;
            height: 50%;
        }

        .action-button-cell {
            padding: 0.4rem 0.8rem 0.5rem 0.45rem;
        }

        .action-button-cell.bottom {
            padding: 0.15rem 0.8rem 0.7rem 0.45rem;
        }

        .mainButtons {
            width: 100%;
            height: 100%;
            background: #3498db;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .mainButtons:hover {
            background: #2980b9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-chat-area {
                width: 70%;
            }
            
            .right-sidebar {
                width: 30%;
            }
        }
    </style>
</head>
<body>
    <div class="background">
        <div class="row">
            <!-- Main Chat Area (74%) -->
            <div class="cell main-chat-area">
                <div class="chat-container">
                    <div class="row chat-messages-area">
                        <div class="cell chat-messages-container">
                            <div id="messagesTabContainer" class="tabcontent">
                                <div id="messagesContainer">
                                    <ul id="messages">
                                        <li class="message system">
                                            üé≠ Welcome to ixchats! Type your message below to start chatting.
                                        </li>
                                        <li class="message system">
                                            üí° Use the tabs below to switch between different views.
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div id="alltabs" class="tab">
                                <div class="chat-container">
                                    <div id="chattabs" class="row">
                                        <button class="active" onclick="switchTab('chat')">Chat</button>
                                        <button onclick="switchTab('powers')">Powers</button>
                                        <button onclick="switchTab('smilies')">Smilies</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Smiley Bar -->
                    <div class="row smiley-bar">
                        <div class="cell smiley-bar-container">
                            <div class="smileyBar">
                                <div id="smileyBar">
                                    <span class="smiley" onclick="addSmiley('üòä')">üòä</span>
                                    <span class="smiley" onclick="addSmiley('üòÇ')">üòÇ</span>
                                    <span class="smiley" onclick="addSmiley('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                                    <span class="smiley" onclick="addSmiley('üëç')">üëç</span>
                                    <span class="smiley" onclick="addSmiley('üéâ')">üéâ</span>
                                    <span class="smiley" onclick="addSmiley('üî•')">üî•</span>
                                    <span class="smiley" onclick="addSmiley('üòé')">üòé</span>
                                    <span class="smiley" onclick="addSmiley('ü§î')">ü§î</span>
                                    <span class="smiley" onclick="addSmiley('üò≠')">üò≠</span>
                                    <span class="smiley" onclick="addSmiley('üíØ')">üíØ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Input Area -->
                    <div class="row input-area">
                        <div class="cell input-container">
                            <div class="input-wrapper">
                                <div class="text-entry-row">
                                    <div class="cell text-entry-cell">
                                        <div id="textEntryEditable" class="textentry" contenteditable="true" onkeypress="handleKeyPress(event)"></div>
                                    </div>
                                    <div class="cell send-button-cell">
                                        <div class="butcontainer">
                                            <div class="butlayout">
                                                <div id="returnBut" class="butcontent mainButtons" onclick="sendMessage()">
                                                    ‚û§
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Sidebar (26%) -->
            <div class="cell right-sidebar">
                <div class="sidebar-container">
                    <div class="row">
                        <div class="cell sidebar-main">
                            <div class="sidebar-main-container">
                                <div class="row visitors-area">
                                    <div class="cell visitors-container">
                                        <div id="visitorsTabContainer" class="tabcontent">
                                            <div id="visitorsContainer">
                                                <ul id="idvisitors">
                                                    <li class="section">Club</li>
                                                    <li class="friend">You (Guest)</li>
                                                    <li class="friend">User123</li>
                                                    <li class="friend">Chatter456</li>
                                                    <li class="section">VIP</li>
                                                    <li class="friend">VIP_User1</li>
                                                    <li class="friend">VIP_User2</li>
                                                    <li class="section">Chum</li>
                                                    <li class="friend">Chum_User1</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div id="listtabs" class="tab">
                                            <button id="defaultList" class="listlinks active" onclick="switchList('visitors')">Visitors</button>
                                            <button id="friendsList" class="listlinks" onclick="switchList('friends')">Friends</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Right Bar Icons -->
                                <div class="row right-bar-icons">
                                    <div class="cell right-bar-container">
                                        <div class="right-bar-wrapper">
                                            <div id="rightBarIcons" class="row">
                                                <div id="groupBut" class="cell svgBack smline"></div>
                                                <div id="helpBut" class="cell svgBack smline"></div>
                                                <div id="xatBut" class="cell svgBack smline"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="row action-buttons">
                                    <div class="cell">
                                        <div class="action-buttons-container">
                                            <div class="row action-button-row">
                                                <div class="cell action-button-cell">
                                                    <div class="butcontainer">
                                                        <div class="butlayout">
                                                            <div id="GetaChat" class="butcontent mainButtons" onclick="getChat()">Get a Chat Box</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row action-button-row">
                                                <div class="cell action-button-cell bottom">
                                                    <div class="butcontainer">
                                                        <div class="butlayout">
                                                            <div id="signIn" class="butcontent mainButtons" onclick="signIn()">Sign In</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'chat';
        let currentList = 'visitors';

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set room name from URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const room = urlParams.get('room');
            if (room) {
                updateRoomName(room);
            }
            
            // Focus on input
            document.getElementById('textEntryEditable').focus();
        });

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('textEntryEditable');
            const message = input.textContent.trim();
            
            if (message) {
                addMessage('You', message);
                input.textContent = '';
                
                // Simulate other users responding
                setTimeout(() => {
                    const responses = [
                        'Hello there!',
                        'Nice to meet you!',
                        'How are you doing?',
                        'Welcome to the chat!',
                        'Great to see you here!'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage('Guest' + Math.floor(Math.random() * 1000), randomResponse);
                }, 1000 + Math.random() * 2000);
            }
        }

        function addMessage(username, content) {
            const messagesList = document.getElementById('messages');
            const messageLi = document.createElement('li');
            messageLi.className = 'message user';
            messageLi.innerHTML = `<span class="username">${username}:</span><span class="content">${content}</span>`;
            messagesList.appendChild(messageLi);
            
            // Scroll to bottom
            const messagesContainer = document.getElementById('messagesContainer');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addSmiley(smiley) {
            const input = document.getElementById('textEntryEditable');
            input.textContent += smiley;
            input.focus();
        }

        function switchTab(tab) {
            currentTab = tab;
            
            // Update active tab buttons
            document.querySelectorAll('#chattabs button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Handle tab switching
            switch(tab) {
                case 'chat':
                    // Show chat interface
                    break;
                case 'powers':
                    addMessage('System', 'Powers tab clicked - powers interface would appear here');
                    break;
                case 'smilies':
                    addMessage('System', 'Smilies tab clicked - smilies interface would appear here');
                    break;
            }
        }

        function switchList(list) {
            currentList = list;
            
            // Update active list buttons
            document.querySelectorAll('.listlinks').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update user list based on selection
            const visitorsList = document.getElementById('idvisitors');
            const users = {
                'visitors': [
                    { type: 'section', name: 'Club' },
                    { type: 'friend', name: 'You (Guest)' },
                    { type: 'friend', name: 'User123' },
                    { type: 'friend', name: 'Chatter456' },
                    { type: 'section', name: 'VIP' },
                    { type: 'friend', name: 'VIP_User1' },
                    { type: 'friend', name: 'VIP_User2' },
                    { type: 'section', name: 'Chum' },
                    { type: 'friend', name: 'Chum_User1' }
                ],
                'friends': [
                    { type: 'section', name: 'Friends' },
                    { type: 'friend', name: 'Friend1' },
                    { type: 'friend', name: 'Friend2' },
                    { type: 'friend', name: 'Friend3' }
                ]
            };
            
            visitorsList.innerHTML = '';
            users[list].forEach(user => {
                const li = document.createElement('li');
                li.className = user.type;
                li.textContent = user.name;
                if (user.type === 'friend') {
                    li.onclick = () => showUserProfile(user.name);
                }
                visitorsList.appendChild(li);
            });
        }

        function showUserProfile(username) {
            addMessage('System', `Clicked on user: ${username} - user profile would appear here`);
        }

        function updateRoomName(room) {
            // Update page title or add room indicator
            document.title = `${room.charAt(0).toUpperCase() + room.slice(1)} - ixchats`;
        }

        function getChat() {
            if (window.parent && window.parent !== window) {
                window.parent.location.href = '/chat-edit.html';
            } else {
                window.location.href = '/chat-edit.html';
            }
        }

        function signIn() {
            if (window.parent && window.parent !== window) {
                window.parent.location.href = '/auth.html';
            } else {
                window.location.href = '/auth.html';
            }
        }

        // Simulate some activity
        setInterval(() => {
            const messages = [
                'Hello everyone!',
                'How is everyone doing?',
                'This chat is awesome!',
                'Anyone want to play games?',
                'Great to be here!'
            ];
            
            if (Math.random() < 0.1) { // 10% chance every 5 seconds
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                const randomUser = 'Guest' + Math.floor(Math.random() * 1000);
                addMessage(randomUser, randomMessage);
            }
        }, 5000);
    </script>
</body>
</html>
