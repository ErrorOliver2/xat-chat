/*! For license information please see main.b2c4202b1fc75ec05266.js.LICENSE.txt */
(()=>{"use strict";var e,t={100:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){var e,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(t,o,a,i){var c=o&&o.prototype instanceof l?o:l,u=Object.create(c.prototype);return n(u,"_invoke",function(t,n,o){var a,i,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,i=0,c=e,f.n=n,s}};function m(t,n){for(i=t,c=n,r=0;!d&&l&&!o&&r<u.length;r++){var o,a=u[r],m=f.p,p=a[2];t>3?(o=p===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=t<2&&m<a[1])?(i=0,f.v=n,f.n=a[1]):m<p&&(o=t<3||a[0]>n||n>p)&&(a[4]=t,a[5]=n,f.n=p,i=0))}if(o||t>1)return s;throw d=!0,n}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),i=u,c=p;(r=i<2?e:c)||!d;){a||(i?i<3?(i>1&&(f.n=-1),m(i,c)):f.n=c:f.v=c);try{if(l=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((r=(d=f.n<0)?c:t.call(n,f))!==s)break}catch(t){a=e,i=1,c=t}finally{l=1}}return{value:r,done:d}}}(t,a,i),!0),u}var s={};function l(){}function u(){}function d(){}r=Object.getPrototypeOf;var f=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),m=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,n(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,n(m,"constructor",d),n(d,"constructor",u),u.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(m),n(m,i,"Generator"),n(m,a,function(){return this}),n(m,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:p}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){function i(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},n(e,t,r,o)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(t,n,r){return(n=function(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,s,"next",e)}function s(e){i(a,r,o,c,s,"throw",e)}c(void 0)})}}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="notification ".concat(t),n.innerHTML='\n    <div class="notification-content">\n      <span class="notification-message">'.concat(e,'</span>\n      <button class="notification-close">&times;</button>\n    </div>\n  '),document.body.appendChild(n),setTimeout(function(){n.parentNode&&n.remove()},5e3),n.querySelector(".notification-close").addEventListener("click",function(){n.remove()}),setTimeout(function(){n.classList.add("show")},100)},l=function(){var e=c(t().m(function e(n){var r,a,i,c,s,l,u,d=arguments;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},a=localStorage.getItem("token"),i={"Content-Type":"application/json"},a&&(i.Authorization="Bearer ".concat(a)),c=o(o({},r),{},{headers:o(o({},i),r.headers)}),e.p=1,e.n=2,fetch(n,c);case 2:return s=e.v,e.n=3,s.json();case 3:if(l=e.v,401!==s.status){e.n=4;break}return localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/",e.a(2,null);case 4:return e.a(2,{response:s,data:l});case 5:throw e.p=5,u=e.v,console.error("API request failed:",u),u;case 6:return e.a(2)}},e,null,[[1,5]])}));return function(t){return e.apply(this,arguments)}}(),u=document.getElementById("login-button"),d=document.getElementById("register-button"),f=document.getElementById("create-room-button"),m=document.getElementById("login-modal"),p=document.getElementById("register-modal"),v=document.getElementById("create-room-modal"),y=document.querySelectorAll(".close"),g=document.getElementById("switch-to-register"),h=document.getElementById("switch-to-login"),b=document.getElementById("login-form"),E=document.getElementById("register-form"),w=document.getElementById("create-room-form"),k=document.getElementById("popular-rooms-list");u&&m&&u.addEventListener("click",function(e){e.preventDefault(),m.style.display="block"}),d&&p&&d.addEventListener("click",function(e){e.preventDefault(),p.style.display="block"}),f&&v&&f.addEventListener("click",function(e){e.preventDefault(),v.style.display="block"}),y.length>0&&y.forEach(function(e){e.addEventListener("click",function(){m&&(m.style.display="none"),p&&(p.style.display="none"),v&&(v.style.display="none")})}),g&&m&&p&&g.addEventListener("click",function(e){e.preventDefault(),m.style.display="none",p.style.display="block"}),h&&p&&m&&h.addEventListener("click",function(e){e.preventDefault(),p.style.display="none",m.style.display="block"}),window.addEventListener("click",function(e){e.target===m&&(m.style.display="none"),e.target===p&&(p.style.display="none"),e.target===v&&(v.style.display="none")}),b&&b.addEventListener("submit",function(){var e=c(t().m(function e(n){var r,o,a,i,c;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.preventDefault(),r=document.getElementById("login-username").value,o=document.getElementById("login-password").value,e.p=1,e.n=2,fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:o})});case 2:return a=e.v,e.n=3,a.json();case 3:i=e.v,a.ok?(localStorage.setItem("token",i.token),localStorage.setItem("user",JSON.stringify(i.user)),window.location.href="/chat.html"):s(i.message||"Login failed","error"),e.n=5;break;case 4:e.p=4,c=e.v,console.error("Login error:",c),s("An error occurred during login","error");case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()),E&&E.addEventListener("submit",function(){var e=c(t().m(function e(n){var r,o,a,i,c,l,u;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.preventDefault(),r=document.getElementById("register-username").value,o=document.getElementById("register-email").value,a=document.getElementById("register-password").value,i=document.getElementById("register-confirm-password").value,a===i){e.n=1;break}return s("Passwords do not match","error"),e.a(2);case 1:return e.p=1,e.n=2,fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:o,password:a})});case 2:return c=e.v,e.n=3,c.json();case 3:l=e.v,c.ok?(localStorage.setItem("token",l.token),localStorage.setItem("user",JSON.stringify(l.user)),window.location.href="/chat.html"):s(l.message||"Registration failed","error"),e.n=5;break;case 4:e.p=4,u=e.v,console.error("Registration error:",u),s("An error occurred during registration","error");case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()),w&&w.addEventListener("submit",function(){var e=c(t().m(function e(n){var r,o,a,i,c,u;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.preventDefault(),r=document.getElementById("room-name").value,o=document.getElementById("room-description").value,a=parseInt(document.getElementById("max-users").value),i=document.getElementById("is-private").checked,e.p=1,e.n=2,l("/api/room",{method:"POST",body:JSON.stringify({name:r,description:o||void 0,maxUsers:a,isPrivate:i})});case 2:(c=e.v)&&c.response.ok?(v.style.display="none",s('Room "'.concat(c.data.room.name,'" created successfully!'),"success"),setTimeout(function(){window.location.href="/classic.html?room=".concat(c.data.room._id)},1e3)):c&&s(c.data.message||"Failed to create room","error"),e.n=4;break;case 3:e.p=3,u=e.v,console.error("Room creation error:",u),s("An error occurred while creating the room","error");case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}());var O=function(){var e=c(t().m(function e(){var n,r,o;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(k){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,fetch("/api/room?sort=popular&limit=6");case 2:return n=e.v,e.n=3,n.json();case 3:if(r=e.v,!n.ok){e.n=5;break}if(k.innerHTML="",0!==r.rooms.length){e.n=4;break}return k.innerHTML='\n          <div class="loading-rooms">\n            <h3>No rooms available yet</h3>\n            <p>Be the first to create a chat room!</p>\n            <a href="/classic.html" class="btn btn-primary">\n              <i class="fas fa-plus"></i>\n              <span>Create Room</span>\n            </a>\n          </div>\n        ',e.a(2);case 4:r.rooms.forEach(function(e){var t=document.createElement("div");t.className="room-card",t.innerHTML='\n          <div class="room-card-header">\n            <h3>'.concat(e.name,"</h3>\n            <p>").concat(e.description||"Join the conversation!",'</p>\n          </div>\n          <div class="room-card-body">\n            <div class="room-stats">\n              <div class="room-stat">\n                <i class="fas fa-users"></i>\n                <span>').concat(e.usersCount||0,' users</span>\n              </div>\n              <div class="room-stat">\n                <i class="fas fa-star"></i>\n                <span>').concat(e.powers?e.powers.length:0,' powers</span>\n              </div>\n            </div>\n            <div class="room-actions">\n              <a href="/classic.html?room=').concat(e._id,'" class="btn btn-primary btn-small">\n                <i class="fas fa-comments"></i>\n                <span>Join Classic</span>\n              </a>\n              <a href="/chat.html?room=').concat(e._id,'" class="btn btn-secondary btn-small">\n                <i class="fas fa-rocket"></i>\n                <span>Modern Chat</span>\n              </a>\n            </div>\n          </div>\n        '),k.appendChild(t)}),e.n=6;break;case 5:k.innerHTML='\n        <div class="loading-rooms">\n          <h3>Failed to load rooms</h3>\n          <p>Please try again later</p>\n        </div>\n      ';case 6:e.n=8;break;case 7:e.p=7,o=e.v,console.error("Error loading popular rooms:",o),k.innerHTML='\n      <div class="loading-rooms">\n        <h3>Error loading rooms</h3>\n        <p>Please check your connection and try again</p>\n      </div>\n    ';case 8:return e.a(2)}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",function(){!function(){var e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t){u&&(u.style.display="none"),d&&(d.style.display="none"),f&&(f.style.display="flex");var n=document.getElementById("profile-link"),r=document.getElementById("logout-link");n&&(n.style.display="flex",n.classList.remove("d-none")),r&&(r.style.display="flex",r.classList.remove("d-none"),r.addEventListener("click",function(e){e.preventDefault(),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload()}));var o=document.querySelector(".welcome-title");if(o){var a=JSON.parse(t);o.textContent="Welcome back, ".concat(a.displayName||a.username,"!")}}else f&&(f.style.display="none")}(),O(),function(){document.querySelector(".carousel-track");var e=document.querySelectorAll(".carousel-slide"),t=document.querySelectorAll(".dot"),n=document.getElementById("carousel-prev"),r=document.getElementById("carousel-next"),o=0,a=function(n){e.forEach(function(e,t){e.classList.toggle("active",t===n)}),t.forEach(function(e,t){e.classList.toggle("active",t===n)}),o=n},i=function(){var t=(o+1)%e.length;a(t)};n&&n.addEventListener("click",function(){var t=(o-1+e.length)%e.length;a(t)}),r&&r.addEventListener("click",i),t.forEach(function(e,t){e.addEventListener("click",function(){return a(t)})}),setInterval(i,5e3)}()})}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,o,a]=e[u],c=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](n[s]))?n.splice(s--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=792,(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,c,s]=n,l=0;if(i.some(t=>0!==e[t])){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var u=s(r)}for(t&&t(n);l<i.length;l++)a=i[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunkxat_recreation=self.webpackChunkxat_recreation||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[96],()=>r(100));o=r.O(o)})();
//# sourceMappingURL=main.b2c4202b1fc75ec05266.js.map